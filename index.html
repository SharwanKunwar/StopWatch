<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StopWatch</title>
    <script src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs" type="module"></script>    
</head>

<!-- //styling -->
<style>
    *{
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: monospace;
    }html,body{
        width: 100vw;
        height: 100vh;
        background-color: #8EC5FC;
        background-image: linear-gradient(62deg, #8EC5FC 0%, #E0C3FC 100%);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 30px;
    }

    /* //loading Activity starting page code */
    .intro{
        width: 60%;
        height: 200px;
        font-size: 20px;
        color: black;
        background-color:white;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        border-top-right-radius: 30px;
        border-bottom-left-radius: 30px;
    }
    #intro_btn01{
        width: 30%;
        height: 7%;
        border: none;
        border-radius: 100px;
        color: white;
        font-size: 18px;
        background-color: black;
    }
    .lottie-box{
        width: 60%;
        height: 150px;
        /* background-color: red; */

    }
    #animation01{
        background-color: red;
    }

    /* //home Activity code */
    .main {
    width: 50%;
    height: 40%;
    font-size: 20px;
    color: black;
    background: rgba(255, 255, 255, 0.2); /* semi-transparent white */
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    border-top-right-radius: 30px;
    border-bottom-left-radius: 30px;
    box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.2);
    backdrop-filter: blur(10px); /* glass effect */
    -webkit-backdrop-filter: blur(10px); /* Safari support */
    border: 1px solid rgba(255, 255, 255, 0.3); /* frosted glass border */
}

    #top{
        width: 100%;
        height: 20%;
        /* background-color: red; */
        display: flex;
        justify-content: start;
    }
    #monthAndDay{
        width: 20%;
        height: 100%;
        color: white;
        background-color: black;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    #middle{
        width: 100%;
        height: 60%;
        color: white;
        text-shadow: 1px 1px 5px black;
        /* background-color: yellow; */ 
        /* /* display: flex;
        justify-content: center;
        align-items: center; */

    }

    #middle,#currentTime{
        width: 100%;
        height: 100%;
        font-size: 6rem;
        /* background-color: blue; */
        display: flex;
        align-items: center;
        justify-content: center;
    }

    #bottom{
        width: 100%;
        height: 20%;
        /* background-color: purple; */
        display: flex;
        justify-content: end;
    }
    #year{
        width: 20%;
        height: 100%;
        color: white;
        background-color: black;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    #bottom-end{
        width: 50%;
        height: 20%;
        font-size: 20px;
        color: black;
        background: rgba(255, 255, 255, 0.2); 
        padding: 20px;
        border-radius: 20px;
        
    }
    #home-bottom-btn{
        width: 50%;
        height: 10%;
        /* background-color: red; */
    }
    #study-btn{
        font-size: 18px;
        width: 220px;
        height: 50px;
        border: none;
        border-radius: 100px;
        color: white;
        font-weight: 900;
        background-color: black;
    }
    /* //study code  */
    .study {
        width: 50%;
        height: 400px;
        font-size: 20px;
        color: black;
        background-color: white;
        display: flex;
        flex-direction: column;
        align-items: center;
        border-top-right-radius: 30px;
        border-bottom-left-radius: 30px;
        gap: 10px;
    }

    .head {
        width: 100%;
        height: 15%;
        border-bottom: 1px solid black;
        display: flex;
        justify-content: center;
        align-items: center;
        font-weight: 900;
        font-size: 2.5rem;
    }

    .study-body {
        width: 100%;
        height: 60%;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    #duration {
        width: 20%;
        height: 50%;
        text-align: center;
        font-size: 3rem;
    }

    #study-btns {
        width: 100%;
        height: 25%;
        border-bottom-left-radius: 30px;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    #btn-study-start {
        width: 80%;
        height: 50%;
        border: none;
        border-radius: 100px;
        font-weight: 900;
        font-size: 1.4rem;
        color: white;
        background-color: black;
    }

    /* Center the countdown section */
    #countdown-section {
        display: flex;
        justify-content: center;
        align-items: center;
        position: absolute; /* Absolute positioning ensures it's centered */
        top: 0; bottom: 0; left: 0; right: 0;
    }

    #countdown {
        font-size: 5rem;
        color: #333;
        font-weight: bold;
        text-align: center;
    }


    
</style>

<body id="bb">
        

</body>
 <script>

    let name = "sharwn";
    let age =22;

    console.log("sharwan: ",name);
    
        // HTML structure for the intro screen    
        const introHTML = `
            <div class="lottie-box">    
                <dotlottie-player src="https://lottie.host/8457d3a8-adfd-462e-ab6b-04635b8faa23/KzGtZepqve.lottie" 
                background="transparent" 
                speed="1" 
                style="width: 200px; height: 300px" 
                loop autoplay></dotlottie-player>
            </div>
            <div class="intro">
                <h3>The <span style="color: red;">magic</span> you are <span style="color: purple;">looking</span> for is in the <span style="color: red;">work</span> you are <span style="color: peru;">avoiding</span>.</h3>
            </div>
            <button id="intro_btn01">Let's get started</button>
        `;

        // HTML structure for the home page
        const homeHTML = `
            <div class="main">
                <div id="top">
                    <div id="monthAndDay">...</div>
                </div>
                <div id="middle">
                    <div id="currentTime">12:00:00</div>
                </div>
                <div id="bottom">
                    <div id="year">.asdf..</div>
                </div>
            </div>
            <section id="bottom-end">
                <h3>Quote of the day:</h3>
                <br>
                <p id="quote">Learning never exhausts the mind.</p>
            </section>
            <section id="home-bottom-btn">
                <button id="study-btn">Study with me</button>
            </section>
        `;
        
        const study = `<div class="study">
        <div class="head">Set Duration</div>
        <div class="study-body">
            <input id="duration" type="number" placeholder="30" min="1">
        </div>
        <section id="study-btns">
            <button id="btn-study-start">Start Deep Focused Environment</button>
        </section>
        <section id="countdown-section" style="display:none;">
            <div id="countdown">00:00</div>
        </section>
    </div>`;
        // Function to update time every second
        function updateTime() {
            const date = new Date();
            const time = date.toLocaleTimeString();
            document.getElementById("currentTime").innerText = time;
        }

        // Function to set Nepali date once
        function setNepaliDate() {
            if (typeof NepaliDate !== "undefined") {
                const nepaliDate = new NepaliDate();
                const nepaliYear = nepaliDate.getYear();
                const nepaliMonth = nepaliDate.getMonth();
                const nepaliDay = nepaliDate.getDate();
                const nepaliMonths = [
                    "बैशाख", "जेष्ठ", "असार", "श्रावण", "भाद्र", "आश्विन", "कार्तिक", "मङ्सिर",
                    "पौष", "माघ", "फागुन", "चैत्र"
                ];
                const nepaliMonthName = nepaliMonths[nepaliMonth];
                document.querySelector("#monthAndDay").textContent = `${nepaliMonthName}, ${nepaliDay}`;
                document.querySelector("#year").textContent = nepaliYear;
            } else {
                document.querySelector("#monthAndDay").textContent = "(⓿_⓿)";
                document.querySelector("#year").textContent = "◑﹏◐";
            }
        }

        // Function to fetch and display a random quote
        function displayQuote() {
                fetch("https://api.quotable.io/random")
                .then(res => res.json())
                .then(data => {
                    document.getElementById("quote").textContent = data.content;
                })
                .catch(error => {
                    console.error('Error fetching quote:', error);
                });

        }

        // Event Listener for the "Let's get started" button
        document.querySelector("body").innerHTML = introHTML;
        document.querySelector("#intro_btn01").addEventListener("click", () => {
            document.querySelector("body").innerHTML = homeHTML;
            setNepaliDate();
            setInterval(setNepaliDate, 1000);
            updateTime();
            setInterval(updateTime, 1000);
            displayQuote();
            setInterval(displayQuote, 600000); // Fetch a new quote every minute

            // Event listener for the "Study with me" button
            document.querySelector("#study-btn").addEventListener("click", () => {
                // Define your study session behavior here
                document.body.innerHTML = study;

                const startStudy = document.getElementById("btn-study-start");
    const countdownSection = document.getElementById("countdown-section");
    const countdownDisplay = document.getElementById("countdown");

    let countdownTimer;

    startStudy.addEventListener("click", function() {
        const duration = parseInt(document.getElementById("duration").value);


        //here

        if (isNaN(duration) || duration <= 0) {
            alert("Please enter a valid duration.");
            return;
        }

        // Hide the input and start button
        document.querySelector(".study-body").style.display = "none";
        document.querySelector("#study-btns").style.display = "none";

        // Show the countdown section
        countdownSection.style.display = "flex";

        let timeRemaining = duration * 60; // Convert minutes to seconds

        function updateCountdown() {
            let minutes = Math.floor(timeRemaining / 60);
            let seconds = timeRemaining % 60;

            // Format time as MM:SS
            countdownDisplay.textContent = `${minutes < 10 ? '0' + minutes : minutes}:${seconds < 10 ? '0' + seconds : seconds}`;

            


            if (timeRemaining <= 0) {
                clearInterval(countdownTimer);
                alert("Time's up! You've completed your focus session.");
                

            }else if(timeRemaining <= 50){
                //color changer concept
                const colorValue = [0,1,2,3,4,5,6,7,8,9,"A","B","C","D","E","F"];
                let finalColor = "#";
                for(let i=0; i<6; i++)
                {
                    finalColor += colorValue[Math.floor(Math.random()*16)];
                }
                document.querySelector("body").style.backgroundColor = finalColor;
                document.querySelector("body").style.backgroundImage = "none";
            }

            timeRemaining--;
        }

        // Start the countdown
        countdownTimer = setInterval(updateCountdown, 1000);
    });
            });
        });
    </script>
</html>


